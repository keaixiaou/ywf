[common]
overwrite = true
project=CYApi
module=Diancan

## 生产配置文件， key:value|key:value
[conf]


########################### 控制器Controller设置 ###########################
#所有控制器
[controller]
controllers = Item|BusinessOrder|Cart|Showcase|Shop|Order


### BusinessOrder
# 控制器的函数
[BusinessOrderController]
functions = add|detail|getList|cancel|memo|sellerMemo|invoice|extraCharge|pay|settleAccounts|payState

### 控制器函数的参数列表
[BusinessOrderController.add]
desc=新建业务单
type=post
paramNum = 7
param0=kdtId|kdtId|Noo|店铺ID
param1=diancanId|diancanId|Noo|点餐id
param2=tableId|tableId|Noo|桌位编号
param3=userId|userId|Noo|买家id|env
param4=sellerMemo|sellerMemo|''|商家备注
param5=invoice|invoice|''|发票抬头
param6=extraCharge|extraCharge|0|附加费

[BusinessOrderController.detail]
desc=业务单详情
type=post
paramNum = 2
param0=kdtId|kdtId|Noo|店铺ID
param1=diancanId|diancanId|Noo|点餐id

[BusinessOrderController.settleAccounts]
desc=业务单结账
type=post
paramNum = 2
param0=kdtId|kdtId|Noo|店铺ID
param1=diancanId|diancanId|Noo|点餐id

[BusinessOrderController.getList]
desc=业务单列表
type=post
paramNum = 4
param0=kdtId|kdtId|Noo|店铺ID
param1=orderStatus|orderStatus|Noo|业务单状态
param2=page|page|1|页数
param3=pageSize|pageSize|20|每页条数

[BusinessOrderController.cancel]
desc=取消业务单
type=post
paramNum = 2
param0=kdtId|kdtId|Noo|店铺ID
param1=businessOrderId|businessOrderId|Noo|业务单id

[BusinessOrderController.memo]
desc=买家备注
type=post
paramNum = 3
param0=kdtId|kdtId|Noo|店铺ID
param1=businessOrderId|businessOrderId|Noo|业务单id
param2=memo|memo|Noo|买家备注

[BusinessOrderController.sellerMemo]
desc=商家备注
type=post
paramNum = 3
param0=kdtId|kdtId|Noo|店铺ID
param1=businessOrderId|businessOrderId|Noo|业务单id
param2=sellerMemo|sellerMemo|Noo|商家备注

[BusinessOrderController.invoice]
desc=发票抬头
type=post
paramNum = 3
param0=kdtId|kdtId|Noo|店铺ID
param1=businessOrderId|businessOrderId|Noo|业务单id
param2=invoice|invoice|Noo|发票抬头

[BusinessOrderController.extraCharge]
desc=附加费
type=post
paramNum = 3
param0=kdtId|kdtId|Noo|店铺ID
param1=businessOrderId|businessOrderId|Noo|业务单id
param2=extraCharge|extraCharge|Noo|附加费

[BusinessOrderController.pay]
desc=支付
type=post
paramNum =11
param0=payType|payType|Noo|支付方式（wapay,alipay）
param1=youzanUserId|youzan_user_id|Noo|youzanuserid
param2=buyerId|buyerId|Noo|buyerId
param3=platform|platform|Noo|平台
param4=businessOrderId|businessOrderId|Noo|业务单编号
param5=buyer|buyer|Noo|buyer
param6=kdtId|kdtId|0|店铺ID
param7=selectCoupon|selectCoupon|Noo|优惠券编号
param8=clientIp|clientIp|Noo|客户端IP
param9=fansId|fansId|Noo|fans编号
param10=fansType|fansType|Noo|fans类别

[BusinessOrderController.payState]
desc=轮询业务单详情
type=get
paramNum=2
param0=kdtId|kdtId|Noo|店铺ID
param1=businessOrderId|businessOrderId|Noo|业务单编号
test=
return=


### Item
# 点餐
[ItemController]
functions = put|delete|get|gets

[ItemController.put]
desc=更新一个桌子的点菜流程
type=post
paramNum = 3
param0=userId|userId|0|用户id
param1=userNum|userNum|0|参与人数
param2=tableId|tableId|Noo|桌子ID
test=curl -d "userId=12345678&userNum=2&tableId=38" 127.0.0.1:8013/diancan/item/put?debug_tpl=t2
return={"code":0,"msg":"diancan/item::Put","data":{"result":14}}

[ItemController.delete]
desc=清除桌子上的点菜流程
type=post
paramNum = 2
param0=userId|userId|0|用户id
param1=tableId|tableId|Noo|点餐ID
test=curl -d "tableId=38&userId=100" 127.0.0.1:8013/diancan/item/delete?debug_tpl=t2

[ItemController.get]
desc=获得桌子目前的点菜流程
type=post
paramNum = 1
param0=tableId|tableId|Noo|桌子ID
test=curl -d "tableId=38" 127.0.0.1:8013/diancan/item/get?debug_tpl=t2
return={"code":0,"msg":"diancan/item::Get","data":{"status":2,"userNum":0,"kdtId":324995,"diancanId":"26","businessOrderId":184}}


[ItemController.gets]
desc=批量获得桌子目前的点菜流程
type=post
paramNum = 1
param0=tableIds|tableIds|Noo|桌子IDs
test=curl -d "tableIds=3" 127.0.0.1:8013/diancan/item/gets?debug_tpl=t2
return={"code":0,"msg":"diancan/item::Gets","data":{"3":{"id":"15","status":0,"created_at":"2017-06-07 15:35:32","updated_at":"2017-06-07 15:35:32","tableId":"3","kdtId":"322140","createdUid":"12345678","updatedUid":"12345678","userNum":2},"4":{"id":"16","status":0,"created_at":"2017-06-07 15:36:09","updated_at":"2017-06-07 15:36:09","tableId":"4","kdtId":"322140","createdUid":"12345678","updatedUid":"12345678","userNum":2},"5":{"id":"17","status":0,"created_at":"2017-06-07 15:36:15","updated_at":"2017-06-07 15:36:15","tableId":"5","kdtId":"322140","createdUid":"12345678","updatedUid":"12345678","userNum":2}}}

### Cart
# 购物车
[CartController]
functions = get|foodOp|foodTruncate|update


[CartController.update]
desc=修改购物车
type=post
paramNum = 4
param0=userId|userId|0|用户id
param1=diancanId|diancanId|Noo|描述
param2=remark|remark|null|描述
param3=source|source|null|来源
test=curl -d "diancanId=20&userId=123456&remark=aaaa" 127.0.0.1:8013/diancan/cart/update?debug_tpl=t2
return={"code":0,"msg":"diancan/cart::Update","data":{"result":true}}

[CartController.get]
desc=获得购物车
type=post
paramNum = 2
param0=userId|userId|0|用户id
param1=diancanId|diancanId|Noo|点餐Id
test=curl -d "diancanId=20" 127.0.0.1:8013/diancan/cart/get?debug_tpl=t2
return={"code":0,"msg":"diancan/cart::Get","data":{"id":"17","remark":"aaaa","status":"0","diancanId":"20","kdtId":"323080","createdUid":"12345678","updatedUid":"12345678","goodsNum":"0","createdAt":"2017-06-07 17:35:41","updatedAt":"2017-06-08 19:34:23","list":[{"recordList":[{"id":1,"source":"0","status":2017,"num":1,"userId":5124805,"goodsId":948257,"skuId":2359,"kdtId":323080,"cartId":17,"createdUid":"0","updatedUid":"12345678","createdAt":"2017-06-08 16:20:08","updatedAt":"2017-06-08 19:35:48"},{"id":2,"source":"0","status":2017,"num":1,"userId":5124805,"goodsId":948257,"skuId":2359,"kdtId":323080,"cartId":17,"createdUid":"123456","updatedUid":"12345678","createdAt":"2017-06-08 16:55:36","updatedAt":"2017-06-08 19:35:48"}],"userInfo":{"id":5124805,"nickName":"18358137892","avatar":"https://dn-kdt-img.qbox.me/upload_files/avatar.png","mobile":"18358137892"}}],"goodsList":{"948257":{"goodsId":948257,"title":"商品3","price":200,"content":"我是描述2","picture":[],"totalSoldNum":0,"status":0,"soldStatus":1,"stocks":null,"totalStock":201,"goodsType":5,"isDisplay":1,"tagList":null,"multiSku":null}},"skuList":{"2359":{"isGoodsSkuId":true}}}}

[CartController.foodOp]
desc=购物车加菜/减菜
type=post
paramNum = 8
param0=userId|userId|0|用户id
param1=type|type|0|类型，1加菜,2减菜
param2=goodsId|goodsId|Noo|商品Id
param3=skuId|skuId|Noo|skuId
param4=diancanId|diancanId|Noo|点餐Id
param5=opUserId|opUserId|Noo|点餐Id
param6=num|num|1|数量
param7=source|source|null|来源
test=curl -d "diancanId=20&goodsId=948257&type=0&skuId=2359&userId=123456" 127.0.0.1:8013/diancan/cart/foodOp?debug_tpl=t2
return={"code":0,"msg":"diancan/cart::FoodOp","data":{"result":true}}


[CartController.foodTruncate]
desc= 清除购物车
type=post
paramNum = 3
param0=userId|userId|0|用户id
param1=diancanId|diancanId|Noo|点餐Id
param2=source|source|null|来源
test=curl -d "diancanId=20&userId=123456" 127.0.0.1:8013/diancan/cart/foodTruncate?debug_tpl=t2
return={"code":0,"msg":"diancan/cart::FoodOp","data":{"result":true}}


### Shop
# 控制器的函数
[ShopController]
functions = set|get

[ShopController.get]
desc= 获取店铺堂食点菜功能是否开启
type=get
paramNum = 1
param0=kdtId|kdtId|Noo|店铺ID
test=curl "http://10.9.132.163:8019/diancan/shop/get?debug_tpl=t2&kdtId=345674"
return={"code":0,"msg":"diancan\/shop::Get","data":{"type":2,"status":1}}


[ShopController.set]
desc= 开启/关闭堂食点菜
type=post
paramNum = 2
param0=kdtId|kdtId|Noo|店铺ID
param1=status|status|0|0：开启；1：关闭
test=curl -d "kdtId=345674&status=0" "http://10.9.132.163:8019/diancan/shop/set?debug_tpl=t2"
return={"code":0,"msg":"diancan\/shop::Set","data":{"result":true}}


### OrderController
# 控制器的函数
[OrderController]
functions = state

[OrderController.state]
desc=点餐订单状态
type=post
paramNum=1
param0=orderId|orderId|Noo|订单编号
